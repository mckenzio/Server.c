/*    C socket server*/ #include<stdio.h>#include<string.h>    //strlen#include<sys/socket.h>#include<arpa/inet.h> //inet_addr#include<unistd.h>    //write int main(int argc , char *argv[]){    int socket_desc , client_sock , c , read_size;    struct sockaddr_in server , client;    char client_message[2000];         //Create socket    socket_desc = socket(AF_INET , SOCK_STREAM , 0);    if (socket_desc == -1)    {        printf("Could not create socket");    }    puts("Socket created");         //Prepare the sockaddr_in structure    server.sin_family = AF_INET;    server.sin_addr.s_addr = INADDR_ANY;    server.sin_port = htons( 8888 );         //Bind    if( bind(socket_desc,(struct sockaddr *)&server , sizeof(server)) < 0)    {        //print the error message        perror("bind failed. Error");        return 1;    }    puts("bind done");         //Listen    listen(socket_desc , 3);         //Accept and incoming connection    puts("Waiting for incoming connections...");    c = sizeof(struct sockaddr_in);         //accept connection from an incoming client    client_sock = accept(socket_desc, (struct sockaddr *)&client, (socklen_t*)&c);    if (client_sock < 0)    {        perror("accept failed");        return 1;    }    puts("Connection accepted");         //Receive a message from client    while( (read_size = recv(client_sock , client_message , 2000 , 0)) > 0 )    {        //Send the message back to client        write(client_sock , client_message , strlen(client_message));  client_message[read_size] = '\0';        printf("Message received: %s\n", client_message); //int v = (int) client_message; int x = client_message[0] - '0'; //printf("Message received: %d\n%d", v,x); switch(x) {  case 1:   printf("1st message\n");   printf("**************************************************\n");   printf("Newton's first law... \n");   printf("An object at rest will remain at rest unless acted on by an unbalanced force. An object in motion continues in motion with the same speed and in the same direction unless acted upon by an unbalanced force.\n");   printf("**************************************************\n");   break;  case 2:   printf("**************************************************\n");   printf("Newton's second law... \n");   printf("Acceleration is produced when a force acts on a mass. The greater the mass (of the object being accelerated) the greater the amount of force needed (to accelerate the object). \n");   printf("**************************************************\n");   break;  case 3:   printf("**************************************************\n");   printf("Newton's third law... \n");   printf("For every action there is an equal and opposite re-action. \n");   printf("**************************************************\n");   break; }    }         if(read_size == 0)    {        puts("Client disconnected");        fflush(stdout);    }    else if(read_size == -1)    {        perror("recv failed");    }         return 0;}
